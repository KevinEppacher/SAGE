pcl_to_scan:
  ros__parameters:
    # Target frame for the laser scan
    target_frame: "XT_32_10hz"
    
    # Output frame (same as target frame in this case)
    output_frame: "XT_32_10hz"
    
    # Transform tolerance in seconds
    transform_tolerance: 0.05
    
    # Height filtering (Z-axis limits)
    min_height: -0.10
    max_height: 0.30
    
    # Angular range settings
    angle_min: -3.14159    # -180 degrees
    angle_max: 3.14159     #  180 degrees
    angle_increment: 0.004363323  # ~0.25 degrees
    
    # Range filtering
    range_min: 0.1
    range_max: 20.0
    
    # Scan timing
    scan_time: 0.0
    
    # Infinity handling
    use_inf: false
    inf_epsilon: 1.0
    
    # Concurrency settings
    concurrency_level: 1
    
    # Use simulation time
    use_sim_time: true

    qos_overrides:
      /scan:
        publisher:
          reliability: reliable
          durability: volatile
      # /clock:
      #   subscription:
      #     depth: 1
      #     durability: volatile
      #     history: keep_last
      #     reliability: best_effort

exploration_graph_nodes:
  semantic_frontier_exploration_node:
    ros__parameters:
      publish_frequency: 10.0
      occupancy_topic: "/exploration_map"
      value_map_topic: "/value_map/value_map_raw"
      min_cluster_size: 5
      max_cluster_size: 500

  map_inflation_node:
    ros__parameters:
      map_topic: "/map"
      inflated_map_topic: "/inflated_map"
      inflation_radius: 0.1
      inflation_iterations: 2
      kernel_type: "ellipse"
      input_qos: "reliable"
      output_qos: "reliable"

  map_explorer_node:
    ros__parameters:
      # --- Input / Output topics ---
      map_topic: "/inflated_map"                  # Subscribed parent occupancy grid
      exploration_topic: "/exploration_map"  # Published persistent global map

      # --- TF and Frames ---
      base_link_frame: "base_link"                # Robot base frame for ray origins

      # --- Clear service configuration ---
      clear_service_name: "/exploration_map/clear"  # Service name to clear the map
      debug_mode: true                             # Publish PoseArray for visualization (true = enable)

      # --- Raycasting parameters ---
      max_range_m: 15.0                            # Maximum ray length (meters)
      stride: 1                                    # Subsampling factor for map cells

      # --- Pose buffer behavior ---
      pose_dist_thresh: 0.5                        # Minimum translation (m) before storing new pose
      max_poses: 100                                # Maximum stored poses in buffer

fused:
  graph_node_fusion:
    ros__parameters:
      # approach_radius: 1.8
      approach_radius: 0.0
      debug_distance: true
      detection_topic: /detection_graph_nodes/graph_nodes
      exploitation_topic: /exploitation_graph_nodes/graph_nodes
      exploration_topic: /exploration_graph_nodes/graph_nodes
      exploration_weight: 0.5
      fused_topics:
        detection_graph_nodes: detection_graph_nodes/graph_nodes
        exploration_graph_nodes: exploration_graph_nodes/graph_nodes
      max_visited: 200
      timer_period: 0.1
      weights:
        det_weight: 1.0
        map_weight: 1.0
        mem_sigma: 0.5
        mem_weight: 1.0
        proximity_weight: 1.0

fused:
  graph_node_fusion:
    ros__parameters:
      # approach_radius: 1.8
      approach_radius: 0.0
      debug_distance: true
      detection_topic: /detection_graph_nodes/graph_nodes
      exploitation_topic: /exploitation_graph_nodes/graph_nodes
      exploration_topic: /filtered/exploration_graph_nodes/graph_nodes
      exploration_weight: 0.5
      fused_topics:
        detection_graph_nodes: detection_graph_nodes/graph_nodes
        exploration_graph_nodes: exploration_graph_nodes/graph_nodes
      max_visited: 200
      timer_period: 0.1
      weights:
        det_weight: 1.0
        map_weight: 1.0
        mem_sigma: 0.5
        mem_weight: 1.0
        proximity_weight: 1.0

explorer_relevance_map:
  relevance_map:
    ros__parameters:
      angular_confidence_sharpness: 0.6
      base_increment_rate: 0.01
      camera_info_topic: /camera_info
      debug_mode: true
      decay_factor: 1.0
      fov_deg: 70.0
      frame_map: map
      frame_robot: base_link
      input_graph_topic: /exploration_graph_nodes/graph_nodes
      input_map_topic: /map
      max_range: 3.0
      output_graph_topic: /filtered/exploration_graph_nodes/graph_nodes
      prompt_topic: /user_prompt
      qos_overrides./clock.subscription.depth: 1
      qos_overrides./clock.subscription.durability: volatile
      qos_overrides./clock.subscription.history: keep_last
      qos_overrides./clock.subscription.reliability: best_effort
      qos_overrides./parameter_events.publisher.depth: 1000
      qos_overrides./parameter_events.publisher.durability: volatile
      qos_overrides./parameter_events.publisher.history: keep_last
      qos_overrides./parameter_events.publisher.reliability: reliable
      radial_confidence_sharpness: 1.0
      raytracing_enabled: true
      relevance_threshold: 1.0
      robot.frame_map: map
      robot.frame_robot: base_link

exploitation_relevance_map:
  relevance_map:
    ros__parameters:
      base_increment_rate: 0.03
      camera_info_topic: /camera_info
      debug_mode: true
      decay_factor: 0.99
      fov_deg: 70.0
      frame_map: map
      frame_robot: base_link
      input_graph_topic: /exploitation_graph_nodes/graph_nodes
      input_map_topic: /map
      max_range: 5.0
      output_graph_topic: /filtered/exploitation_graph_nodes/graph_nodes
      qos_overrides./clock.subscription.depth: 1
      qos_overrides./clock.subscription.durability: volatile
      qos_overrides./clock.subscription.history: keep_last
      qos_overrides./clock.subscription.reliability: best_effort
      qos_overrides./parameter_events.publisher.depth: 1000
      qos_overrides./parameter_events.publisher.durability: volatile
      qos_overrides./parameter_events.publisher.history: keep_last
      qos_overrides./parameter_events.publisher.reliability: reliable
      raytracing_enabled: false
      relevance_threshold: 0.8
      robot.frame_map: map
      robot.frame_robot: base_link
      angular_confidence_sharpness: 0.2
      radial_confidence_sharpness: 0.5
